{"remainingRequest":"/Users/tomas/Desktop/hello-vue/node_modules/thread-loader/dist/cjs.js!/Users/tomas/Desktop/hello-vue/node_modules/babel-loader/lib/index.js!/Users/tomas/Desktop/hello-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js","dependencies":[{"path":"/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js","mtime":1619357894900},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90b21hcy9EZXNrdG9wL2hlbGxvLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgY3JlZCBmcm9tICcuLi8uLi9jcmVkLmpzJzsKdmFyIHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgLyoqTG9naW4gbWV0aG9kCiAgICogCiAgICogQHBhcmFtIHsqfSBjb250ZXh0IAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHVybCwgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YSwgZXhwaXJlc0luLCBleHBpcmF0aW9uRGF0ZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVybCA9IGNyZWQucHJvZC51cmxfbG9naW47CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdycsCiAgICAgICAgICAgICAgICAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yCiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZURhdGEuY29kZSA9PT0gNDAxKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgY29kZTogIiArIHJlc3BvbnNlLnN0YXR1cyk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIC8vIHF1aSB0dXR0byBvayAKICAgICAgICAgICAgICAvLyByZXNwb25zZURhdGEuZXhwaXJlc0luID0gMzYwMCAsLCwgw6ggaW4gc2Vjb25kaSBbKiAxMDAgcGVyIG90dGVuZXJlIG1pbGxpc2Vjb25kaV0KICAgICAgICAgICAgICBleHBpcmVzSW4gPSArcmVzcG9uc2VEYXRhLmV4cGlyZXNJbiAqIDEwMDA7IC8vICBjb25zdCBleHBpcmVzSW4gPSA1MDAwCiAgICAgICAgICAgICAgLy8gZ2V0cyB0aGUgdGltZSBpbiBtaWxsaXNlY29uZHMKCiAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIGV4cGlyZXNJbjsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZURhdGEudG9rZW4pOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCByZXNwb25zZURhdGEuZW1haWwpOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbkV4cGlyYXRpb24nLCBleHBpcmF0aW9uRGF0ZSk7IC8vIGRvcG8gcXVlc3RvIHRlbXBvICdleHBpcmVzSW4nLCBsYSBmdW56aW9uZSB2aWVuZSBlc2VndWl0YQogICAgICAgICAgICAgIC8vIFVuYSB2b2x0YSBsb2dvdXQsIHB1bGlzY28gaWwgdGltZXIgY29uIGNsZWFyVGltZW91dAoKICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgnYXV0b0xvZ091dCcpOwogICAgICAgICAgICAgIH0sIGV4cGlyZXNJbik7CiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgICAgICAgICAgICB0b2tlbjogcmVzcG9uc2VEYXRhLnRva2VuLAogICAgICAgICAgICAgICAgdXNlcklkOiByZXNwb25zZURhdGEuZW1haWwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogcmVnaXN0ZXIgbWV0aG9kCiAgICogQHBhcmFtIHsqfSBfIAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoXywgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciB1cmwsIHJlc3BvbnNlLCByZXNwb25zZURhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXJsID0gY3JlZC5wcm9kLnVybF9yZWdpc3RlcjsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJywKICAgICAgICAgICAgICAgIC8vICpkZWZhdWx0LCBuby1jYWNoZSwgcmVsb2FkLCBmb3JjZS1jYWNoZSwgb25seS1pZi1jYWNoZWQKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAgICAgLy8gaW5jbHVkZSwgKnNhbWUtb3JpZ2luLCBvbWl0CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdycsCiAgICAgICAgICAgICAgICAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yCiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJywKICAgICAgICAgICAgICAgIGVuY3R5cGU6ICdtdXRpcGFydC9mb3JtLWRhdGEnLAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBuYW1lOiBwYXlsb2FkLm5hbWUsCiAgICAgICAgICAgICAgICAgIHN1cm5hbWU6IHBheWxvYWQuc3VybmFtZSwKICAgICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2VEYXRhLmNvZGUgPT09IDQwOSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiUmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBjb2RlOiAiICsgcmVzcG9uc2Uuc3RhdHVzKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAogIHJlc2V0UGFzc3dvcmQ6IGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoXywgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciB1cmwsIHJlc3BvbnNlLCByZXNwb25zZURhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXJsID0gY3JlZC5wcm9kLnVybF9yZXNldF9wYXNzd29yZDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJywKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgY2hhbmdlUGFzc3dvcmQ6IGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICB2YXIgdXJsLCByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB1cmwgPSBjcmVkLnByb2QudXJsX2NoYW5nZV9wYXNzd29yZDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJywKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgY29kZTogIiArIHJlc3BvbnNlLnN0YXR1cyk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBHZXQgY2FsbHMgaW4gZXZlcnkgcGFnZSByaWxvYWQKICAgKiBAcGFyYW0geyp9IF8gCiAgICogQHBhcmFtIHsqfSBwYXlsb2FkIAogICAqLwogIHRyeUxvZ2luOiBmdW5jdGlvbiB0cnlMb2dpbihjb250ZXh0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgdmFyIHRva2VuLCB1c2VySWQsIHRva2VuRXhwaXJhdGlvbiwgZXhwaXJlZEluOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICAgICAgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbkV4cGlyYXRpb24nKTsgLy8gcHJlbmRvIGxhIGRpZmZlcmVuemEgcGVyIGNhcGlyZSBzZSBpbCB0b2tlbiDDqCBzY2FkdXRvCgogICAgICAgICAgICAgIGV4cGlyZWRJbiA9ICt0b2tlbkV4cGlyYXRpb24gLSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgICAgICAgICAgaWYgKCEoZXhwaXJlZEluIDwgMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoKCdhdXRvTG9nT3V0Jyk7CiAgICAgICAgICAgICAgfSwgZXhwaXJlZEluKTsKCiAgICAgICAgICAgICAgaWYgKHRva2VuICYmIHVzZXJJZCkgewogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU1KTsKICAgIH0pKSgpOwogIH0sCgogIC8qKgogICAqIExvZ3MgdGhlIHVzZXIgb3V0CiAgICogQHBhcmFtIHsqfSBjb250ZXh0IAogICAqLwogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJJZCcpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicpOwogICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogbnVsbCwKICAgICAgdXNlcklkOiBudWxsCiAgICB9KTsKICB9LAogIGF1dG9Mb2dPdXQ6IGZ1bmN0aW9uIGF1dG9Mb2dPdXQoY29udGV4dCkgewogICAgLy8gY2hpYW1hIGlsIG1ldG9kbyBxdWkgc29wcmEgJ2xvZ291dAogICAgY29udGV4dC5kaXNwYXRjaCgnbG9nb3V0Jyk7IC8vIG1ldHRlIGRpZEF1dG9Mb2dvdXQgPSB0cnVlIG5lbCBpbmRleC5qcwoKICAgIGNvbnRleHQuY29tbWl0KCdzZXRBdXRvTG9nb3V0Jyk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js"],"names":["cred","timer","login","context","payload","url","prod","url_login","fetch","method","headers","redirect","referrerPolicy","body","JSON","stringify","email","password","response","json","responseData","ok","code","Error","message","status","expiresIn","expirationDate","Date","getTime","localStorage","setItem","token","setTimeout","dispatch","commit","userId","register","_","url_register","console","log","cache","credentials","enctype","name","surname","resetPassword","url_reset_password","changePassword","url_change_password","tryLogin","getItem","tokenExpiration","expiredIn","logout","removeItem","clearTimeout","autoLogOut"],"mappings":"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","sourcesContent":["import cred from '../../cred.js'\n\nlet timer\n\nexport default {\n    /**Login method\n     * \n     * @param {*} context \n     * @param {*} payload \n     */\n    async login(context, payload) {\n\n        let url = cred.prod.url_login\n\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 401) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n        // qui tutto ok \n\n\n        // responseData.expiresIn = 3600 ,,, è in secondi [* 100 per ottenere millisecondi]\n        const expiresIn = +responseData.expiresIn * 1000\n            //  const expiresIn = 5000\n            // gets the time in milliseconds\n        const expirationDate = new Date().getTime() + expiresIn\n\n\n        localStorage.setItem('token', responseData.token)\n        localStorage.setItem('userId', responseData.email)\n        localStorage.setItem('tokenExpiration', expirationDate)\n\n\n        // dopo questo tempo 'expiresIn', la funzione viene eseguita\n        // Una volta logout, pulisco il timer con clearTimeout\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiresIn);\n\n\n        context.commit('setUser', {\n            token: responseData.token,\n            userId: responseData.email,\n        })\n\n\n    },\n\n\n    /**\n     * register method\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async register(_, payload) {\n\n        let url = cred.prod.url_register\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin', // include, *same-origin, omit\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n            body: JSON.stringify({\n                name: payload.name,\n                surname: payload.surname,\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 409) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n\n\n    },\n\n\n\n\n\n    async resetPassword(_, payload) {\n\n        let url = cred.prod.url_reset_password\n\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n\n            body: JSON.stringify({\n                email: payload.email,\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            throw new Error(responseData.message)\n        }\n    },\n    async changePassword(_, payload) {\n\n\n        let url = cred.prod.url_change_password\n\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(\"Request failed with error code: \" + response.status)\n        }\n\n\n    },\n\n\n\n\n\n    /**\n     * Get calls in every page riload\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async tryLogin(context) {\n        const token = localStorage.getItem('token')\n        const userId = localStorage.getItem('userId')\n        const tokenExpiration = localStorage.getItem('tokenExpiration')\n\n        // prendo la differenza per capire se il token è scaduto\n        const expiredIn = +tokenExpiration - new Date().getTime();\n\n        if (expiredIn < 0) {\n            return\n        }\n\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiredIn)\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n            })\n        }\n    },\n\n    /**\n     * Logs the user out\n     * @param {*} context \n     */\n    logout(context) {\n\n        localStorage.removeItem('token')\n        localStorage.removeItem('userId')\n        localStorage.removeItem('tokenExpiration')\n\n        clearTimeout(timer)\n\n        context.commit('setUser', {\n            token: null,\n            userId: null\n\n        })\n\n    },\n    autoLogOut(context) {\n        // chiama il metodo qui sopra 'logout\n        context.dispatch('logout')\n            // mette didAutoLogout = true nel index.js\n        context.commit('setAutoLogout')\n    }\n\n\n\n}"]}]}