{"remainingRequest":"/home/tommal/Scrivania/hello-vue/node_modules/babel-loader/lib/index.js!/home/tommal/Scrivania/hello-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tommal/Scrivania/hello-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/tommal/Scrivania/hello-vue/src/pages/auth/UserLogin.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/tommal/Scrivania/hello-vue/src/pages/auth/UserLogin.vue","mtime":1620493094842},{"path":"/home/tommal/Scrivania/hello-vue/node_modules/cache-loader/dist/cjs.js","mtime":1620493093766},{"path":"/home/tommal/Scrivania/hello-vue/node_modules/babel-loader/lib/index.js","mtime":1620493093746},{"path":"/home/tommal/Scrivania/hello-vue/node_modules/cache-loader/dist/cjs.js","mtime":1620493093766},{"path":"/home/tommal/Scrivania/hello-vue/node_modules/vue-loader-v16/dist/index.js","mtime":1620493094758}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3RvbW1hbC9TY3JpdmFuaWEvaGVsbG8tdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiB7CiAgICAgICAgdmFsdWU6ICIiLAogICAgICAgIGlzVmFsaWQ6IHRydWUKICAgICAgfSwKICAgICAgcGFzc3dvcmQ6IHsKICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgaXNWYWxpZDogdHJ1ZQogICAgICB9LAogICAgICBpc0Zvcm1WYWxpZDogdHJ1ZSwKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHdyb25nUGFzc3dvcmQ6IDAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtU3VibWl0OiBmdW5jdGlvbiBmb3JtU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYWN0aW9uUGF5bG9hZCwgcmVkaXJlY3R1cmw7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuZW1haWxWYWxpZGF0aW9uKCk7CgogICAgICAgICAgICAgICAgX3RoaXMucGFzc3dvcmRWYWxpZGF0aW9uKCk7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzRm9ybVZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGFjdGlvblBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBfdGhpcy5lbWFpbC52YWx1ZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnBhc3N3b3JkLnZhbHVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvZ2luIiwgYWN0aW9uUGF5bG9hZCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHNlcnZlIHBlciBwcmVuZGVyZSBsYSBxdWVyeSA/cmVkaXJlY3Q9bG9naW4KICAgICAgICAgICAgICAgIHJlZGlyZWN0dXJsID0gIi8iICsgKF90aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdCB8fCAicHVibGljIik7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5yZXBsYWNlKHJlZGlyZWN0dXJsKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgICBfdGhpcy53cm9uZ1Bhc3N3b3JkKys7CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IF9jb250ZXh0LnQwLm1lc3NhZ2UgfHwgIkZhaWxlZCB0byBhdXRoZW50aWNhdGUiOwogICAgICAgICAgICAgICAgX3RoaXMucGFzc3dvcmQudmFsdWUgPSAiIjsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s2LCAxM11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZW1haWxWYWxpZGF0aW9uOiBmdW5jdGlvbiBlbWFpbFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMuZW1haWwuaXNWYWxpZCA9IHRydWU7CiAgICAgIHRoaXMuaXNGb3JtVmFsaWQgPSB0cnVlOwoKICAgICAgaWYgKCF0aGlzLmVtYWlsLnZhbHVlIHx8ICF0aGlzLmVtYWlsLnZhbHVlLmluY2x1ZGVzKCJAIikpIHsKICAgICAgICB0aGlzLmVtYWlsLmlzVmFsaWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmlzRm9ybVZhbGlkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBwYXNzd29yZFZhbGlkYXRpb246IGZ1bmN0aW9uIHBhc3N3b3JkVmFsaWRhdGlvbigpIHsKICAgICAgdGhpcy5pc0Zvcm1WYWxpZCA9IHRydWU7CiAgICAgIHRoaXMucGFzc3dvcmQuaXNWYWxpZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMucGFzc3dvcmQudmFsdWUgfHwgdGhpcy5wYXNzd29yZC52YWx1ZS5sZW5ndGggPCA0KSB7CiAgICAgICAgdGhpcy5pc0Zvcm1WYWxpZCA9IGZhbHNlOwogICAgICAgIHRoaXMucGFzc3dvcmQuaXNWYWxpZCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkgewogICAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBsaW5rV2l0aEVtYWlsOiBmdW5jdGlvbiBsaW5rV2l0aEVtYWlsKCkgewogICAgICByZXR1cm4gIi9yZXNldFBhc3N3b3JkIiArICh0aGlzLmVtYWlsLnZhbHVlICE9PSAiIiA/ICI/ZW1haWw9IiArIHRoaXMuZW1haWwudmFsdWUgOiAiIik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/tommal/Scrivania/hello-vue/src/pages/auth/UserLogin.vue"],"names":[],"mappings":";;;;;;AAmFA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,KAAK,EAAE;AACL,QAAA,KAAK,EAAE,EADF;AAEL,QAAA,OAAO,EAAE;AAFJ,OADF;AAKL,MAAA,QAAQ,EAAE;AACR,QAAA,KAAK,EAAE,EADC;AAER,QAAA,OAAO,EAAE;AAFD,OALL;AASL,MAAA,WAAW,EAAE,IATR;AAUL,MAAA,KAAK,EAAE,IAVF;AAWL,MAAA,SAAS,EAAE,KAXN;AAYL,MAAA,aAAa,EAAE;AAZV,KAAP;AAcD,GAhBY;AAiBb,EAAA,OAAO,EAAE;AACD,IAAA,UADC,wBACY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACjB,gBAAA,KAAI,CAAC,eAAL;;AACA,gBAAA,KAAI,CAAC,kBAAL;;AAFiB,oBAGZ,KAAI,CAAC,WAHO;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAMjB,gBAAA,KAAI,CAAC,SAAL,GAAiB,IAAjB;AAEM,gBAAA,aARW,GAQK;AACpB,kBAAA,KAAK,EAAE,KAAI,CAAC,KAAL,CAAW,KADE;AAEpB,kBAAA,QAAQ,EAAE,KAAI,CAAC,QAAL,CAAc;AAFJ,iBARL;AAAA;AAAA;AAAA,uBAcT,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,OAArB,EAA8B,aAA9B,CAdS;;AAAA;AAef;AACM,gBAAA,WAhBS,GAgBK,OAAO,KAAI,CAAC,MAAL,CAAY,KAAZ,CAAkB,QAAlB,IAA8B,QAArC,CAhBL;;AAiBf,gBAAA,KAAI,CAAC,OAAL,CAAa,OAAb,CAAqB,WAArB;;AAjBe;AAAA;;AAAA;AAAA;AAAA;AAmBf,gBAAA,KAAI,CAAC,aAAL;AACA,gBAAA,KAAI,CAAC,KAAL,GAAa,YAAM,OAAN,IAAiB,wBAA9B;AACA,gBAAA,KAAI,CAAC,QAAL,CAAc,KAAd,GAAsB,EAAtB;;AArBe;AAwBjB,gBAAA,KAAI,CAAC,SAAL,GAAiB,KAAjB;;AAxBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBlB,KA1BM;AA2BP,IAAA,eA3BO,6BA2BW;AAChB,WAAK,KAAL,CAAW,OAAX,GAAqB,IAArB;AACA,WAAK,WAAL,GAAmB,IAAnB;;AACA,UAAI,CAAC,KAAK,KAAL,CAAW,KAAZ,IAAqB,CAAC,KAAK,KAAL,CAAW,KAAX,CAAiB,QAAjB,CAA0B,GAA1B,CAA1B,EAA0D;AACxD,aAAK,KAAL,CAAW,OAAX,GAAqB,KAArB;AACA,aAAK,WAAL,GAAmB,KAAnB;AACF;AACD,KAlCM;AAmCP,IAAA,kBAnCO,gCAmCc;AACnB,WAAK,WAAL,GAAmB,IAAnB;AACA,WAAK,QAAL,CAAc,OAAd,GAAwB,IAAxB;;AACA,UAAI,CAAC,KAAK,QAAL,CAAc,KAAf,IAAwB,KAAK,QAAL,CAAc,KAAd,CAAoB,MAApB,GAA6B,CAAzD,EAA4D;AAC1D,aAAK,WAAL,GAAmB,KAAnB;AACA,aAAK,QAAL,CAAc,OAAd,GAAwB,KAAxB;AACF;AACD,KA1CM;AA2CP,IAAA,WA3CO,yBA2CO;AACZ,WAAK,KAAL,GAAa,IAAb;AACD;AA7CM,GAjBI;AAgEb,EAAA,QAAQ,EAAE;AACR,IAAA,aADQ,2BACQ;AACd,aACE,oBACC,KAAK,KAAL,CAAW,KAAX,KAAqB,EAArB,GAA0B,YAAY,KAAK,KAAL,CAAW,KAAjD,GAAyD,EAD1D,CADF;AAID;AANO;AAhEG,CAAf","sourcesContent":["<template>\n  <div>\n    <base-dialog\n      :show=\"!!error\"\n      title=\"An error occurred!\"\n      @close=\"handleError\"\n      >{{ error }}</base-dialog\n    >\n\n    <base-dialog :show=\"isLoading\" fixed title=\"Login...\">\n      <base-spinner></base-spinner>\n    </base-dialog>\n\n\n\n    <div class=\"w3-row margin-all\">\n      <div class=\"w3-quarter w3-container\"></div>\n      <div class=\"w3-half w3-container\">\n        <div class=\"w3-margin w3-card-4\">\n          <div class=\"w3-container w3-blue w3-center\">\n            <h3>Login</h3>\n          </div>\n\n          <form class=\"w3-container w3-margin\" @submit.prevent=\"formSubmit\">\n            <p>\n              <label for=\"email\">Login</label>\n              <input\n                class=\"w3-input\"\n                type=\"text\"\n                id=\"email\"\n                v-model.trim=\"email.value\"\n                @blur=\"emailValidation\"\n                :class=\"{ error: !email.isValid }\"\n              />\n            </p>\n\n            <p v-if=\"!email.isValid\" class=\"w3-text-red\">\n              Please enter a valid email\n            </p>\n\n            <p>\n              <label for=\"password\">Password</label>\n              <input\n                class=\"w3-input\"\n                type=\"password\"\n                id=\"password\"\n                v-model.number=\"password.value\"\n                @blur=\"passwordValidation\"\n                :class=\"{ error: !password.isValid }\"\n              />\n            </p>\n            <p v-if=\"!password.isValid\" class=\"w3-text-red\">\n              Password is required!!\n            </p>\n\n            <p class=\"w3-padding but\"> <button class=\"w3-button w3-block w3-blue \">Login</button></p>\n            <h6 class=\" w3-padding\">\n              If not yet,\n              <router-link class=\"w3-text-blue\" to=\"/register\"\n                >Register</router-link\n              >\n              to signup!\n            </h6>\n            <h6 v-if=\"wrongPassword > 2\" class=\"w3-text-orange w3-padding\">\n              Seems like You dont remember your pssword,\n              <router-link class=\"w3-text-blue\" :to=\"linkWithEmail\"\n                >Reset password</router-link\n              >\n            </h6>\n          </form>\n        </div>\n      </div>\n      <div class=\"w3-quarter w3-container\"></div>\n    </div>\n    </div>\n\n</template>\n\n\n\n\n\n<script>\nexport default {\n  data() {\n    return {\n      email: {\n        value: \"\",\n        isValid: true,\n      },\n      password: {\n        value: \"\",\n        isValid: true,\n      },\n      isFormValid: true,\n      error: null,\n      isLoading: false,\n      wrongPassword: 0,\n    };\n  },\n  methods: {\n    async formSubmit() {\n      this.emailValidation();\n      this.passwordValidation();\n      if (!this.isFormValid) {\n        return;\n      }\n      this.isLoading = true;\n\n      const actionPayload = {\n        email: this.email.value,\n        password: this.password.value,\n      };\n\n      try {\n        await this.$store.dispatch(\"login\", actionPayload);\n        // this.$route.query.redirect serve per prendere la query ?redirect=login\n        const redirecturl = \"/\" + (this.$route.query.redirect || \"public\");\n        this.$router.replace(redirecturl);\n      } catch (error) {\n        this.wrongPassword++;\n        this.error = error.message || \"Failed to authenticate\";\n        this.password.value = \"\";\n      }\n\n      this.isLoading = false;\n    },\n    emailValidation() {\n      this.email.isValid = true;\n      this.isFormValid = true;\n      if (!this.email.value || !this.email.value.includes(\"@\")) {\n        this.email.isValid = false;\n        this.isFormValid = false;\n      }\n    },\n    passwordValidation() {\n      this.isFormValid = true;\n      this.password.isValid = true;\n      if (!this.password.value || this.password.value.length < 4) {\n        this.isFormValid = false;\n        this.password.isValid = false;\n      }\n    },\n    handleError() {\n      this.error = null;\n    },\n  },\n  computed: {\n    linkWithEmail() {\n      return (\n        \"/resetPassword\" +\n        (this.email.value !== \"\" ? \"?email=\" + this.email.value : \"\")\n      );\n    },\n  },\n};\n</script>\n\n\n\n\n\n\n\n<style scoped>\n\n.error {\n  border-color: red;\n}\n\n.login{\n  padding: 10px 154px;\n}\n\n.but{\n  margin-top: 40px;\n}\n\n.margin-all{\n  margin-top: 20px;\n}\n\n\n\n</style>"],"sourceRoot":""}]}