{"remainingRequest":"/home/tommal/Scrivania/setup/node_modules/babel-loader/lib/index.js!/home/tommal/Scrivania/setup/node_modules/eslint-loader/index.js??ref--13-0!/home/tommal/Scrivania/setup/src/store/modules/auth/actions.js","dependencies":[{"path":"/home/tommal/Scrivania/setup/src/store/modules/auth/actions.js","mtime":1621628564822},{"path":"/home/tommal/Scrivania/setup/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tommal/Scrivania/setup/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/tommal/Scrivania/setup/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3RvbW1hbC9TY3JpdmFuaWEvc2V0dXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IGNyZWQgZnJvbSAnLi4vLi4vY3JlZC5qcyc7CnZhciB0aW1lcjsKZXhwb3J0IGRlZmF1bHQgewogIC8qKkxvZ2luIG1ldGhvZAogICAqIAogICAqIEBwYXJhbSB7Kn0gY29udGV4dCAKICAgKiBAcGFyYW0geyp9IHBheWxvYWQgCiAgICovCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciB1cmwsIHJlc3BvbnNlLCByZXNwb25zZURhdGEsIGV4cGlyZXNJbiwgZXhwaXJhdGlvbkRhdGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB1cmwgPSBjcmVkLnByb2QudXJsX2xvZ2luOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvcgogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2VEYXRhLmNvZGUgPT09IDQwMSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlRGF0YS5tZXNzYWdlKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJSZXF1ZXN0IGZhaWxlZCB3aXRoIGVycm9yIGNvZGU6ICIgKyByZXNwb25zZS5zdGF0dXMpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAvLyBxdWkgdHV0dG8gb2sgCiAgICAgICAgICAgICAgLy8gcmVzcG9uc2VEYXRhLmV4cGlyZXNJbiA9IDM2MDAgLCwsIMOoIGluIHNlY29uZGkgWyogMTAwIHBlciBvdHRlbmVyZSBtaWxsaXNlY29uZGldCiAgICAgICAgICAgICAgZXhwaXJlc0luID0gK3Jlc3BvbnNlRGF0YS5leHBpcmVzSW4gKiAxMDAwOyAvLyAgY29uc3QgZXhwaXJlc0luID0gNTAwMAogICAgICAgICAgICAgIC8vIGdldHMgdGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzCgogICAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBleHBpcmVzSW47CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2VEYXRhLnRva2VuKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzcG9uc2VEYXRhLmVtYWlsKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJywgZXhwaXJhdGlvbkRhdGUpOyAvLyBkb3BvIHF1ZXN0byB0ZW1wbyAnZXhwaXJlc0luJywgbGEgZnVuemlvbmUgdmllbmUgZXNlZ3VpdGEKICAgICAgICAgICAgICAvLyBVbmEgdm9sdGEgbG9nb3V0LCBwdWxpc2NvIGlsIHRpbWVyIGNvbiBjbGVhclRpbWVvdXQKCiAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2F1dG9Mb2dPdXQnKTsKICAgICAgICAgICAgICB9LCBleHBpcmVzSW4pOwogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICAgICAgICAgICAgdG9rZW46IHJlc3BvbnNlRGF0YS50b2tlbiwKICAgICAgICAgICAgICAgIHVzZXJJZDogcmVzcG9uc2VEYXRhLmVtYWlsCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZ2V0RXZlbnRzOiBmdW5jdGlvbiBnZXRFdmVudHMoXywgcGF5bG9hZCkgewogICAgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9ldmVudC9nZXRFdmVudCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhkYXRhKTsKICAgIH0pOwogIH0sCgogIC8qKgogICAqIHJlZ2lzdGVyIG1ldGhvZAogICAqIEBwYXJhbSB7Kn0gXyAKICAgKiBAcGFyYW0geyp9IHBheWxvYWQgCiAgICovCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgdXJsLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVybCA9IGNyZWQucHJvZC51cmxfcmVnaXN0ZXI7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsCiAgICAgICAgICAgICAgICAvLyAqZGVmYXVsdCwgbm8tY2FjaGUsIHJlbG9hZCwgZm9yY2UtY2FjaGUsIG9ubHktaWYtY2FjaGVkCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUsICpzYW1lLW9yaWdpbiwgb21pdAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvcgogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLAogICAgICAgICAgICAgICAgICBzdXJuYW1lOiBwYXlsb2FkLnN1cm5hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlRGF0YS5jb2RlID09PSA0MDkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgY29kZTogIiArIHJlc3BvbnNlLnN0YXR1cyk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICByZXNldFBhc3N3b3JkOiBmdW5jdGlvbiByZXNldFBhc3N3b3JkKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgdXJsLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVybCA9IGNyZWQucHJvZC51cmxfcmVzZXRfcGFzc3dvcmQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JywKICAgICAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInLAogICAgICAgICAgICAgICAgZW5jdHlwZTogJ211dGlwYXJ0L2Zvcm0tZGF0YScsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlRGF0YS5tZXNzYWdlKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIGNoYW5nZVBhc3N3b3JkOiBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChfLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIHVybCwgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXJsID0gY3JlZC5wcm9kLnVybF9jaGFuZ2VfcGFzc3dvcmQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JywKICAgICAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInLAogICAgICAgICAgICAgICAgZW5jdHlwZTogJ211dGlwYXJ0L2Zvcm0tZGF0YScsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJSZXF1ZXN0IGZhaWxlZCB3aXRoIGVycm9yIGNvZGU6ICIgKyByZXNwb25zZS5zdGF0dXMpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogR2V0IGNhbGxzIGluIGV2ZXJ5IHBhZ2Ugcmlsb2FkCiAgICogQHBhcmFtIHsqfSBfIAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICB0cnlMb2dpbjogZnVuY3Rpb24gdHJ5TG9naW4oY29udGV4dCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgIHZhciB0b2tlbiwgdXNlcklkLCB0b2tlbkV4cGlyYXRpb24sIGV4cGlyZWRJbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICAgIHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICAgICAgICAgICAgICB0b2tlbkV4cGlyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7IC8vIHByZW5kbyBsYSBkaWZmZXJlbnphIHBlciBjYXBpcmUgc2UgaWwgdG9rZW4gw6ggc2NhZHV0bwoKICAgICAgICAgICAgICBleHBpcmVkSW4gPSArdG9rZW5FeHBpcmF0aW9uIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgICAgICAgICAgIGlmICghKGV4cGlyZWRJbiA8IDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgnYXV0b0xvZ091dCcpOwogICAgICAgICAgICAgIH0sIGV4cGlyZWRJbik7CgogICAgICAgICAgICAgIGlmICh0b2tlbiAmJiB1c2VySWQpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBMb2dzIHRoZSB1c2VyIG91dAogICAqIEBwYXJhbSB7Kn0gY29udGV4dCAKICAgKi8KICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChjb250ZXh0KSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbkV4cGlyYXRpb24nKTsKICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgdG9rZW46IG51bGwsCiAgICAgIHVzZXJJZDogbnVsbAogICAgfSk7CiAgfSwKICBhdXRvTG9nT3V0OiBmdW5jdGlvbiBhdXRvTG9nT3V0KGNvbnRleHQpIHsKICAgIC8vIGNoaWFtYSBpbCBtZXRvZG8gcXVpIHNvcHJhICdsb2dvdXQKICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOyAvLyBtZXR0ZSBkaWRBdXRvTG9nb3V0ID0gdHJ1ZSBuZWwgaW5kZXguanMKCiAgICBjb250ZXh0LmNvbW1pdCgnc2V0QXV0b0xvZ291dCcpOwogIH0KfTs="},{"version":3,"sources":["/home/tommal/Scrivania/setup/src/store/modules/auth/actions.js"],"names":["cred","timer","login","context","payload","url","prod","url_login","fetch","method","headers","redirect","referrerPolicy","body","JSON","stringify","email","password","response","json","responseData","ok","code","Error","message","status","expiresIn","expirationDate","Date","getTime","localStorage","setItem","token","setTimeout","dispatch","commit","userId","getEvents","_","then","data","console","log","register","url_register","cache","credentials","enctype","name","surname","resetPassword","url_reset_password","changePassword","url_change_password","tryLogin","getItem","tokenExpiration","expiredIn","logout","removeItem","clearTimeout","autoLogOut"],"mappings":"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","sourcesContent":["import cred from '../../cred.js'\n\nlet timer\n\nexport default {\n    /**Login method\n     * \n     * @param {*} context \n     * @param {*} payload \n     */\n    async login(context, payload) {\n\n        let url = cred.prod.url_login\n\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 401) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n        // qui tutto ok \n\n\n        // responseData.expiresIn = 3600 ,,, è in secondi [* 100 per ottenere millisecondi]\n        const expiresIn = +responseData.expiresIn * 1000\n            //  const expiresIn = 5000\n            // gets the time in milliseconds\n        const expirationDate = new Date().getTime() + expiresIn\n\n\n        localStorage.setItem('token', responseData.token)\n        localStorage.setItem('userId', responseData.email)\n        localStorage.setItem('tokenExpiration', expirationDate)\n\n\n        // dopo questo tempo 'expiresIn', la funzione viene eseguita\n        // Una volta logout, pulisco il timer con clearTimeout\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiresIn);\n\n\n        context.commit('setUser', {\n            token: responseData.token,\n            userId: responseData.email,\n        })\n\n\n    },\n\n\n     getEvents(_, payload) {\n\n        fetch('http://localhost:3000/event/getEvent')\n        .then(response => response.json())\n        .then(data => console.log(data));\n\n\n    },\n\n\n    /**\n     * register method\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async register(_, payload) {\n\n        let url = cred.prod.url_register\n        console.log(payload)\n\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin', // include, *same-origin, omit\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n            body: JSON.stringify({\n                name: payload.name,\n                surname: payload.surname,\n                email: payload.email,\n                password: payload.password\n            })\n        });\n\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 409) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n\n\n    },\n\n\n\n\n\n    async resetPassword(_, payload) {\n\n        let url = cred.prod.url_reset_password\n\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n\n            body: JSON.stringify({\n                email: payload.email,\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            throw new Error(responseData.message)\n        }\n    },\n    async changePassword(_, payload) {\n\n\n        let url = cred.prod.url_change_password\n\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(\"Request failed with error code: \" + response.status)\n        }\n\n\n    },\n\n\n\n\n\n    /**\n     * Get calls in every page riload\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async tryLogin(context) {\n        const token = localStorage.getItem('token')\n        const userId = localStorage.getItem('userId')\n        const tokenExpiration = localStorage.getItem('tokenExpiration')\n\n        // prendo la differenza per capire se il token è scaduto\n        const expiredIn = +tokenExpiration - new Date().getTime();\n\n        if (expiredIn < 0) {\n            return\n        }\n\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiredIn)\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n            })\n        }\n    },\n\n    /**\n     * Logs the user out\n     * @param {*} context \n     */\n    logout(context) {\n\n        localStorage.removeItem('token')\n        localStorage.removeItem('userId')\n        localStorage.removeItem('tokenExpiration')\n\n        clearTimeout(timer)\n\n        context.commit('setUser', {\n            token: null,\n            userId: null\n\n        })\n\n    },\n    autoLogOut(context) {\n        // chiama il metodo qui sopra 'logout\n        context.dispatch('logout')\n            // mette didAutoLogout = true nel index.js\n        context.commit('setAutoLogout')\n    }\n\n\n\n}"]}]}