{"remainingRequest":"/Users/tomas/Desktop/hello-vue/node_modules/babel-loader/lib/index.js!/Users/tomas/Desktop/hello-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js","dependencies":[{"path":"/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js","mtime":1618687128974},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tomas/Desktop/hello-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90b21hcy9EZXNrdG9wL2hlbGxvLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgY3JlZCBmcm9tICcuLi8uLi9jcmVkLmpzJzsKdmFyIHRpbWVyOwpleHBvcnQgZGVmYXVsdCB7CiAgLyoqTG9naW4gbWV0aG9kCiAgICogCiAgICogQHBhcmFtIHsqfSBjb250ZXh0IAogICAqIEBwYXJhbSB7Kn0gcGF5bG9hZCAKICAgKi8KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHVybCwgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YSwgZXhwaXJlc0luLCBleHBpcmF0aW9uRGF0ZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVybCA9IGNyZWQuZGV2LnVybF9sb2dpbjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JywKICAgICAgICAgICAgICAgIC8vIG1hbnVhbCwgKmZvbGxvdywgZXJyb3IKICAgICAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInLAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlRGF0YS5jb2RlID09PSA0MDEpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiUmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBjb2RlOiAiICsgcmVzcG9uc2Uuc3RhdHVzKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgLy8gcXVpIHR1dHRvIG9rIAogICAgICAgICAgICAgIC8vIHJlc3BvbnNlRGF0YS5leHBpcmVzSW4gPSAzNjAwICwsLCDDqCBpbiBzZWNvbmRpIFsqIDEwMCBwZXIgb3R0ZW5lcmUgbWlsbGlzZWNvbmRpXQogICAgICAgICAgICAgIGV4cGlyZXNJbiA9ICtyZXNwb25zZURhdGEuZXhwaXJlc0luICogMTAwMDsgLy8gIGNvbnN0IGV4cGlyZXNJbiA9IDUwMDAKICAgICAgICAgICAgICAvLyBnZXRzIHRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcwoKICAgICAgICAgICAgICBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3BvbnNlRGF0YS50b2tlbik7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHJlc3BvbnNlRGF0YS5lbWFpbCk7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicsIGV4cGlyYXRpb25EYXRlKTsgLy8gZG9wbyBxdWVzdG8gdGVtcG8gJ2V4cGlyZXNJbicsIGxhIGZ1bnppb25lIHZpZW5lIGVzZWd1aXRhCiAgICAgICAgICAgICAgLy8gVW5hIHZvbHRhIGxvZ291dCwgcHVsaXNjbyBpbCB0aW1lciBjb24gY2xlYXJUaW1lb3V0CgogICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoKCdhdXRvTG9nT3V0Jyk7CiAgICAgICAgICAgICAgfSwgZXhwaXJlc0luKTsKICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICAgICAgICAgIHRva2VuOiByZXNwb25zZURhdGEudG9rZW4sCiAgICAgICAgICAgICAgICB1c2VySWQ6IHJlc3BvbnNlRGF0YS5lbWFpbAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiByZWdpc3RlciBtZXRob2QKICAgKiBAcGFyYW0geyp9IF8gCiAgICogQHBhcmFtIHsqfSBwYXlsb2FkIAogICAqLwogIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihfLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHVybCwgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB1cmwgPSBjcmVkLmRldi51cmxfcmVnaXN0ZXI7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsCiAgICAgICAgICAgICAgICAvLyAqZGVmYXVsdCwgbm8tY2FjaGUsIHJlbG9hZCwgZm9yY2UtY2FjaGUsIG9ubHktaWYtY2FjaGVkCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJywKICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUsICpzYW1lLW9yaWdpbiwgb21pdAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvcgogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLAogICAgICAgICAgICAgICAgICBzdXJuYW1lOiBwYXlsb2FkLnN1cm5hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlRGF0YS5jb2RlID09PSA0MDkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgY29kZTogIiArIHJlc3BvbnNlLnN0YXR1cyk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICByZXNldFBhc3N3b3JkOiBmdW5jdGlvbiByZXNldFBhc3N3b3JkKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgdXJsLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVybCA9IGNyZWQuZGV2LnVybF9yZXNldF9wYXNzd29yZDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJywKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLAogICAgICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicsCiAgICAgICAgICAgICAgICBlbmN0eXBlOiAnbXV0aXBhcnQvZm9ybS1kYXRhJywKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgY2hhbmdlUGFzc3dvcmQ6IGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICB2YXIgdXJsLCByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB1cmwgPSBjcmVkLmRldi51cmxfY2hhbmdlX3Bhc3N3b3JkOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLAogICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdycsCiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJywKICAgICAgICAgICAgICAgIGVuY3R5cGU6ICdtdXRpcGFydC9mb3JtLWRhdGEnLAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiUmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBjb2RlOiAiICsgcmVzcG9uc2Uuc3RhdHVzKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSgpOwogIH0sCgogIC8qKgogICAqIEdldCBjYWxscyBpbiBldmVyeSBwYWdlIHJpbG9hZAogICAqIEBwYXJhbSB7Kn0gXyAKICAgKiBAcGFyYW0geyp9IHBheWxvYWQgCiAgICovCiAgdHJ5TG9naW46IGZ1bmN0aW9uIHRyeUxvZ2luKGNvbnRleHQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICB2YXIgdG9rZW4sIHVzZXJJZCwgdG9rZW5FeHBpcmF0aW9uLCBleHBpcmVkSW47CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgICAgICAgICB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CiAgICAgICAgICAgICAgdG9rZW5FeHBpcmF0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuRXhwaXJhdGlvbicpOyAvLyBwcmVuZG8gbGEgZGlmZmVyZW56YSBwZXIgY2FwaXJlIHNlIGlsIHRva2VuIMOoIHNjYWR1dG8KCiAgICAgICAgICAgICAgZXhwaXJlZEluID0gK3Rva2VuRXhwaXJhdGlvbiAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgICAgICAgICAgICBpZiAoIShleHBpcmVkSW4gPCAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2F1dG9Mb2dPdXQnKTsKICAgICAgICAgICAgICB9LCBleHBpcmVkSW4pOwoKICAgICAgICAgICAgICBpZiAodG9rZW4gJiYgdXNlcklkKSB7CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuLAogICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogTG9ncyB0aGUgdXNlciBvdXQKICAgKiBAcGFyYW0geyp9IGNvbnRleHQgCiAgICovCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoY29udGV4dCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcklkJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW5FeHBpcmF0aW9uJyk7CiAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgIHRva2VuOiBudWxsLAogICAgICB1c2VySWQ6IG51bGwKICAgIH0pOwogIH0sCiAgYXV0b0xvZ091dDogZnVuY3Rpb24gYXV0b0xvZ091dChjb250ZXh0KSB7CiAgICAvLyBjaGlhbWEgaWwgbWV0b2RvIHF1aSBzb3ByYSAnbG9nb3V0CiAgICBjb250ZXh0LmRpc3BhdGNoKCdsb2dvdXQnKTsgLy8gbWV0dGUgZGlkQXV0b0xvZ291dCA9IHRydWUgbmVsIGluZGV4LmpzCgogICAgY29udGV4dC5jb21taXQoJ3NldEF1dG9Mb2dvdXQnKTsKICB9Cn07"},{"version":3,"sources":["/Users/tomas/Desktop/hello-vue/src/store/modules/auth/actions.js"],"names":["cred","timer","login","context","payload","url","dev","url_login","fetch","method","headers","redirect","referrerPolicy","body","JSON","stringify","email","password","response","json","responseData","ok","code","Error","message","status","expiresIn","expirationDate","Date","getTime","localStorage","setItem","token","setTimeout","dispatch","commit","userId","register","_","url_register","console","log","cache","credentials","enctype","name","surname","resetPassword","url_reset_password","changePassword","url_change_password","tryLogin","getItem","tokenExpiration","expiredIn","logout","removeItem","clearTimeout","autoLogOut"],"mappings":"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","sourcesContent":["import cred from '../../cred.js'\n\nlet timer\n\nexport default {\n    /**Login method\n     * \n     * @param {*} context \n     * @param {*} payload \n     */\n    async login(context, payload) {\n\n        let url = cred.dev.url_login\n\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 401) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n        // qui tutto ok \n\n\n        // responseData.expiresIn = 3600 ,,, è in secondi [* 100 per ottenere millisecondi]\n        const expiresIn = +responseData.expiresIn * 1000\n            //  const expiresIn = 5000\n            // gets the time in milliseconds\n        const expirationDate = new Date().getTime() + expiresIn\n\n\n        localStorage.setItem('token', responseData.token)\n        localStorage.setItem('userId', responseData.email)\n        localStorage.setItem('tokenExpiration', expirationDate)\n\n\n        // dopo questo tempo 'expiresIn', la funzione viene eseguita\n        // Una volta logout, pulisco il timer con clearTimeout\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiresIn);\n\n\n        context.commit('setUser', {\n            token: responseData.token,\n            userId: responseData.email,\n        })\n\n\n    },\n\n\n    /**\n     * register method\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async register(_, payload) {\n\n        let url = cred.dev.url_register\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'same-origin', // include, *same-origin, omit\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n            body: JSON.stringify({\n                name: payload.name,\n                surname: payload.surname,\n                email: payload.email,\n                password: payload.password\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            if (responseData.code === 409) {\n                throw new Error(responseData.message)\n            } else\n                throw new Error(\"Request failed with error code: \" + response.status)\n\n        }\n\n\n    },\n\n\n\n\n\n    async resetPassword(_, payload) {\n\n        let url = cred.dev.url_reset_password\n\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n\n            body: JSON.stringify({\n                email: payload.email,\n            })\n        });\n        const responseData = await response.json()\n\n        if (!response.ok) {\n            throw new Error(responseData.message)\n        }\n    },\n    async changePassword(_, payload) {\n\n\n        let url = cred.dev.url_change_password\n\n        console.log(payload)\n        const response = await fetch(url, {\n            method: 'POST',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            enctype: 'mutipart/form-data',\n\n            body: JSON.stringify({\n                email: payload.email,\n                password: payload.password\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(\"Request failed with error code: \" + response.status)\n        }\n\n\n    },\n\n\n\n\n\n    /**\n     * Get calls in every page riload\n     * @param {*} _ \n     * @param {*} payload \n     */\n    async tryLogin(context) {\n        const token = localStorage.getItem('token')\n        const userId = localStorage.getItem('userId')\n        const tokenExpiration = localStorage.getItem('tokenExpiration')\n\n        // prendo la differenza per capire se il token è scaduto\n        const expiredIn = +tokenExpiration - new Date().getTime();\n\n        if (expiredIn < 0) {\n            return\n        }\n\n        timer = setTimeout(() => {\n            context.dispatch('autoLogOut')\n        }, expiredIn)\n\n        if (token && userId) {\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n            })\n        }\n    },\n\n    /**\n     * Logs the user out\n     * @param {*} context \n     */\n    logout(context) {\n\n        localStorage.removeItem('token')\n        localStorage.removeItem('userId')\n        localStorage.removeItem('tokenExpiration')\n\n        clearTimeout(timer)\n\n        context.commit('setUser', {\n            token: null,\n            userId: null\n\n        })\n\n    },\n    autoLogOut(context) {\n        // chiama il metodo qui sopra 'logout\n        context.dispatch('logout')\n            // mette didAutoLogout = true nel index.js\n        context.commit('setAutoLogout')\n    }\n\n\n\n}"]}]}